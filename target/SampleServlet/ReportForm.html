<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>RemotePrint.tools</title>
  <meta content="" name="descriptison">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link rel=icon href="assets/img/printerFavicon.png">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/icofont/icofont.min.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/venobox/venobox.css" rel="stylesheet">
  <link href="assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="assets/css/style.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">

  <style>
    .alertSuccess {
      padding: 20px;
      background-color: #80ba77;
      color: white;
      border-radius: 4px;
    }

    .alertFail {
      padding: 20px;
      background-color: #f44336;
      color: white;
      border-radius: 4px;
    }

    .closebtn {
      margin-left: 15px;
      color: white;
      font-weight: bold;
      float: right;
      font-size: 22px;
      line-height: 20px;
      cursor: pointer;
      transition: 0.3s;
    }

    .closebtn:hover {
      color: black;
    }
  </style>

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top">
    <div class="container d-flex align-items-center">

      <h1 class="logo mr-auto"><a href="index.html">RemotePrint.tools</a></h1>
      <!-- Uncomment below if you prefer to use an image logo -->
      <!-- <a href="index.html" class="logo mr-auto"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->

      <!-- <nav class="nav-menu d-none d-lg-block">
            <ul>
                <li class="active"><a href="#header">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#portfolio">Portfolio</a></li>
                <li><a href="#team">Team</a></li>
                <li class="drop-down"><a href="">Drop Down</a>
                    <ul>
                        <li><a href="#">Drop Down 1</a></li>
                        <li class="drop-down"><a href="#">Deep Drop Down</a>
                            <ul>
                                <li><a href="#">Deep Drop Down 1</a></li>
                                <li><a href="#">Deep Drop Down 2</a></li>
                                <li><a href="#">Deep Drop Down 3</a></li>
                                <li><a href="#">Deep Drop Down 4</a></li>
                                <li><a href="#">Deep Drop Down 5</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Drop Down 2</a></li>
                        <li><a href="#">Drop Down 3</a></li>
                        <li><a href="#">Drop Down 4</a></li>
                    </ul>
                </li>
                <li><a href="#contact">Contact</a></li>

            </ul>
        </nav>.nav-menu -->

      <a href="#about" class="get-started-btn scrollto">Get Started</a>

    </div>
  </header><!-- End Header -->

  <!-- ======= Hero Section ======= -->
  <!-- <section id="hero" class="d-flex align-items-center">

  <div class="container">

    <div class="row">
      <div class="col-lg-6 pt-5 pt-lg-0 order-2 order-lg-1 d-flex flex-column justify-content-center">
        <h1>Elegant and creative solutions</h1>
        <h2>We are team of talanted designers making websites with Bootstrap</h2>
        <div class="d-flex">
          <a href="#about" class="btn-get-started scrollto"id="select-button">Get Started</a>
          <input type="file" id="file-input"  style="display: none;" accept=".pdf"/>

          <a href="https://www.youtube.com/watch?v=jDDaplaOz7Q" class="venobox btn-watch-video" data-vbtype="video" data-autoplay="true"> Watch Video <i class="icofont-play-alt-2"></i></a>
        </div>
      </div>
      <div class="col-lg-6 order-1 order-lg-2 hero-img"id="QRCode">
        <img src="assets/img/hero-img.png" class="img-fluid animated" alt="">
      </div>
    </div>
  </div>

</section> -->
  <!-- End Hero -->

  <main id="main">
    <!-- ======= Contact Section ======= -->
    <section id="contact" class="contact">
      <div class="container">

        <div class="section-title">
          <!-- <span>Report Print</span> -->
          <h2>Print Report</h2>
        </div>

        <div class="row">

          <!-- <div class="col-lg-5 d-flex align-items-stretch">
                  <div class="info">
                    <div class="address">
                      <i class="icofont-google-map"></i>
                      <h4>Location:</h4>
                      <p>A108 Adam Street, New York, NY 535022</p>
                    </div>

                    <div class="email">
                      <i class="icofont-envelope"></i>
                      <h4>Email:</h4>
                      <p>info@example.com</p>
                    </div>

                    <div class="phone">
                      <i class="icofont-phone"></i>
                      <h4>Call:</h4>
                      <p>+1 5589 55488 55s</p>
                    </div>

                    <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d12097.433213460943!2d-74.0062269!3d40.7101282!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0xb89d1fe6bc499443!2sDowntown+Conference+Center!5e0!3m2!1smk!2sbg!4v1539943755621" frameborder="0" style="border:0; width: 100%; height: 290px;" allowfullscreen></iframe>
                  </div>
                </div> -->

          <div class="col-sm-6">

            <form form action="submit" method="post" role="form" class="php-email-form" id="form-main">

              <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" class="form-control" name="name" data-rule="lenRange:4,30"
                  data-msg="Please enter a valid full name" />
                <div class="validate"></div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="name">Your Email</label>
                  <input type="email" class="form-control" name="email" data-rule="email"
                    data-msg="Please enter a valid email" />
                  <div class="validate"></div>
                </div>

                <div class="form-group col-md-6">
                  <label for="name">Phone Number</label>
                  <input type="text" class="form-control" name="phoneNumber" data-rule="lenRange:10,10"
                    data-msg="Please enter a valid number" />
                  <div class="validate"></div>
                </div>
              </div>

              <div class="form-group">
                <label for="collegeName">Select College</label>
                <select class="form-control" name="college" id="collegeName">
                  <option>RV College of EngineeringÂ®</option>
                </select>
                <div class="validate"></div>
              </div>

              <div class="form-group">
                <label for="name">USN</label>
                <input type="text" class="form-control" name="usn" data-rule="lenRange:10,11"
                  data-msg="Please enter a valid USN" />
                <div class="validate"></div>
              </div>

              <div class="form-group">
                <label for="name">Guide Name</label>
                <input type="text" class="form-control" name="guideName" data-rule="lenRange:3,20"
                  data-msg="Please fill this field" />
                <div class="validate"></div>
              </div>

              <div class="form-group">
                <label for="name">Department</label>
                <input type="text" class="form-control" name="department" data-rule="lenRange:3,30"
                  data-msg="Please fill this field" />
                <div class="validate"></div>
              </div>

              <div class="form-group">
                <label for="name">Formatting Options</label><br><br>

                <!-- Print Color -->
                <input type="radio" id="BW" name="color" value="BW">
                <label for="BW">Black & White &nbsp;&nbsp;&nbsp;&nbsp;</label>
                <input type="radio" id="color" name="color" value="color">
                <label for="color">Color</label><br><br>

                <!-- Single/Double Sided -->
                <input type="radio" id="singleSided" name="sides" value="single">
                <label for="singleSided">Single Sided &nbsp;&nbsp;</label>
                <input type="radio" id="doubleSided" name="sides" value="double">
                <label for="doubleSided">Double Sided</label><br>
              </div>

              <div class="form-group">
                <label for="collegeName">Spiral Bind Color</label>
                <select class="form-control" name="bindingColor" id="spiralBindColor">
                  <option>None</option>
                  <option>Light Yellow</option>
                  <option>Light Blue</option>
                  <option>Light Pink</option>
                  <option>Light Green</option>
                </select>
                <div class="validate"></div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-3">
                  <a class="get-started-btn" id="upload-button" style="margin-left: 0px;">Select File</a>
                  <input type="file" id="file-input" style="display: none;" accept=".pdf" />
                </div>

                <div class="form-group col-md-9">
                  <input type="text" class="form-control" name="fileNameActual" id="fileNameActual" disabled />
                </div>

              </div>
              <div class="form-row">



                <div id="Cost" style="font-size: large;">
                </div>


                <div class="grid-container">

                  <input type="hidden" class="form-control" name="fileName" id="fileName" value="" />
                  <input type="hidden" class="form-control" name="numberOfPages" id="numberOfPages" value="" />


                  <input type="hidden" class="form-control" name="cost" id="cost" value="" />

                  <div class="Payment">
                    <button class="get-started-btn text-center" id="pay-button" style="margin-left: 0px;">Pay</button>
                    <div class="Cost">
                      <br><strong>
                        <div id="uniqueFileNameLabel" style="font-size: large;"></div>
                      </strong>
                    </div>
                  </div>


                  <div class="QRcode">
                    <div id="QRCode" class="text-center"></div>
                  </div>

                </div>
              </div>



              <div class="form-group">
                <label for="name">UPI Transaction ID</label>
                <input type="text" class="form-control" name="transactionId" data-rule="minlen:3"
                  data-msg="Please fill this field" />
                <div class="validate"></div>
              </div>

              <div class="form-group text-center">
                <button type="submit" id="submit-button" method="post">Submit</button>
              </div>
              <div class="mb-3">
                <div class="loading" >Loading</div>
                <div class="error-message" >Unable to load the "PHP Email Form" Library!</div>
                <div class="sent-message">Your message has been sent. Thank you!</div>
              </div>
            </form>

          </div>
          <div class="col-sm-6" style="object-fit: contain;">
            <img src="assets/img/FormArtWork.svg" alt="Workflow Diagram" style="object-fit: contain;width: 100%;">
          </div>
        </div>
        <div>
          <div class="alertSuccess col-sm-6" id='alertSuccess' style='display:none;'>
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            <strong>Great!</strong> Your Document has been submitted succesfully. You will recieve an email
            shortly.
          </div>
        </div>

        <div>
          <div class="alertFail col-sm-6" id='alertFail' style='display:none;'>
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            <strong>Oops!</strong> Please check form for empty/incorrect fields
          </div>
        </div>
      </div>
    </section>
    <!-- End Contact Section -->

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">

    <!-- <div class="footer-top">
      <div class="container">
        <div class="social-links">
          <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
          <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
          <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
          <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
          <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
        </div>
      </div>
    </div> -->

    <div class="container footer-top">
      <div class="copyright">
        &copy; Copyright <strong><span>ReportPrint</span></strong>. All Rights Reserved
      </div>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/js/azure-storage-blob.js" charset="utf-8"></script>
  <script src="assets/vendor/jquery/jquery.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/waypoints/jquery.waypoints.min.js"></script>
  <script src="assets/vendor/counterup/counterup.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/venobox/venobox.min.js"></script>
  <script src="assets/vendor/owl.carousel/owl.carousel.min.js"></script>

  <script src="assets/js/main.js"></script>
  <script>
    // You'll add code here in the following sections.
    const selectButton = document.getElementById("upload-button");
    const payButton = document.getElementById("pay-button");
    const fileInput = document.getElementById("file-input");
    const fileSelector = document.getElementById('file-input');
    const submitButton = document.getElementById('submit-button');
    const costLabel = document.getElementById("Cost")
    var fileName
    var cost;
    var upiName;
    var bankName;
    submitButton.disabled = true;
    payButton.disabled = true;

    //Event Listeners
    selectButton.addEventListener("click", () => fileInput.click());
    payButton.addEventListener("click", initiatePayment);

    function generateSegment(length) {
      var result = '';
      var characters = 'abcdefghijklmnopqrstuvwxyz';
      var charactersLength = characters.length;
      for (var i = 0; i < length; i++) {
        result += characters.charAt(Math.floor(Math.random() * charactersLength));
      }
      return result;
    }

    function generateUniqueID() {
      return generateSegment(4) + '-' + generateSegment(4)
    }

    function initiatePayment() {
      fileName = generateUniqueID()
      setFileName()
      uploadFiles()
      generateQRCode()
      submitButton.disabled = false;
      payButton.disabled = true;

    }

    function setFileName() {
      var fileNameText = document.getElementById("uniqueFileNameLabel")
      fileNameText.innerHTML = "Unique ID : " + fileName;
      var fileNameInput = document.getElementById("fileName");
      fileNameInput.value = fileName;
    }

    fileSelector.addEventListener('change', (event) => {
      const fileList = event.target.files;
      var reader = new FileReader();
      reader.readAsBinaryString(fileList[0]);
      submitButton.disabled = true;
      resetPaymentInfo();
      reader.onloadend = function () {
        var count = reader.result.match(/\/Type[\s]*\/Page[^s]/g).length;
        console.log('Number of Pages:', count);
        document.getElementById("fileNameActual").value = fileInput.files[0].name
        document.getElementById("numberOfPages").value = count
        calculateCost(count)
        try {
          if (fileInput.files[0].name) {
            payButton.disabled = false;
          }
        } catch {
          console("File Not Selected Exception")
        }
      }
    });

    function resetPaymentInfo() {
      costLabel.innerHTML = '';
      document.getElementById("QRCode").innerHTML = ''
      document.getElementById("uniqueFileNameLabel").innerHTML = ''

    }

    function calculateCost(count) {
      cost = count * 10
      upiName = 'shekar'
      bankName = 'citi'
      costLabel.innerHTML = '<strong>  Estimated Cost : &#8377 ' + cost + '.00</strong>';
      document.getElementById("cost").value = cost
    }

    function generateQRCode() {
      document.getElementById("QRCode").innerHTML =
        '<img src="https://chart.googleapis.com/chart?cht=qr&chl=upi%3A%2F%2Fpay%3Fpa%3D' + name + '%40' + bankName +
        '%26pn%3DDrip%26mc%3D0000%26am%3D' + cost + '.00%26mam%3D0%26cu%3DINR&chs=200x200">';
    }

    //AZURE FUNCTIONS START
    const accountName = "reportprintstorage";
    const sasString =
      "se=2020-08-30T04%3A05%3A23Z&sp=rwdlac&sv=2018-03-28&ss=b&srt=sco&sig=Oz3iNG4cnEWv5uMMMnO4PygVnkMW%2BqnsEWbyZUACigM%3D";
    const containerName = "testcontainer";
    const containerURL = new azblob.ContainerURL(
      `https://${accountName}.blob.core.windows.net/${containerName}?${sasString}`,
      azblob.StorageURL.newPipeline(new azblob.AnonymousCredential));

    const uploadFiles = async () => {
      try {
        const promises = [];

        for (const file of fileInput.files) {
          var filetype = file.name.split("\.")[1];
          if (file.type == "application/pdf") {
            const blockBlobURL = azblob.BlockBlobURL.fromContainerURL(containerURL, fileName + ".pdf");
            promises.push(azblob.uploadBrowserDataToBlockBlob(
              azblob.Aborter.none, file, blockBlobURL));
          } else {
            //error comment for wrong file
          }
        }
        await Promise.all(promises);
      } catch (error) {
        console.log('Error in Azure Upload Function');
      }
    }
    var fullForm=document.getElementById("form-main");
    
    //AZURE FUNCTIONS END
  </script>

  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-orange.min.css" />
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-orange.min.css">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>


</body>

</html>